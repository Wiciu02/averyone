<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tablica interaktywna</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
      crossorigin="anonymous"/>

      <link rel="preconnect" href="https://fonts.gstatic.com">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/hammerjs/2.0.8/hammer.min.js"></script>
  
		<link href="https://fonts.googleapis.com/css2?family=Texturina:wght@900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="./style.css" />

    <script src="fabric2.4.3.js"></script>
    <script>
        var canvas = new fabric.Canvas('canvas',{
            isDrawingMode: true,
        });
        canvas.setBackgroundImage('/pdf-pages/2-page-013.jpg', canvas.renderAll.bind(canvas), {
            originX: 'left', 
            originY: 'top'
        });
        var ctx = canvas.getContext('2d');
        $("#eraser").on("click", function(){
              canvas.isDrawingMode = 1;
              canvas.freeDrawingBrush.color = "red";
              canvas.freeDrawingBrush.width = 20;
              canvas.freeDrawingBrush.globalCompositeOperation = 'destination-out';
              canvas.freeDrawingBrush.id = 'erasure';
              ctx.beginPath(); // the context of canvas
              canvas.renderAll();
        });
        $("#drawer").on("click", function(){
              canvas.isDrawingMode = 1;
              canvas.freeDrawingBrush.color = "blue";
              canvas.freeDrawingBrush.width = 10;
              canvas.freeDrawingBrush.globalCompositeOperation = 'destination-over';
              canvas.freeDrawingBrush.id = 'drawer';
              canvas.renderAll();
        });
        $("#selection").on("click", function(){
              canvas.isDrawingMode = false;
              canvas.selection = true;
            canvas.selectable = true;
        });
        
        function restoreSketch(imageSVG) {
            fabric.loadSVGFromString(imageSVG, function (objects, options) {
              $.each(objects, function (index, value) {
                if (value.id && value.id == 'erasure') {
                  value.set({
                   globalCompositeOperation: 'destination-out'
                  }); //set gCO for value
                }
             });                          
             var obj = fabric.util.groupSVGElements(objects, options);
             canvas.add(obj).renderAll();
          });
        }
    </script>

  </head>
  <body>
    <header>
      
      <div id="controls" >
        <path>
          
        </path>
        <div class="content">
        <div id="widthControl"  title="choose a line width">
          <div class="widthExample"></div>
          <div class="widthExample"></div>
          <div class="widthExample"></div>
          <div class="widthExample"></div>
          <div class="widthExample"></div>
          <div class="Example"></div>
        </div>
        <div id="palette" title="choose a color"></div>
    
        <button id="clearBtn" title="clear the canvas">
          <i class="fa fa-trash" aria-hidden="true"></i>
        </button>
        <button type="button" value="erase" id="eraser" >Gumka</button>
        <button id="download">Pobierz</button>
        <input type="file" id="imageLoader" name="imageLoader" />
      </div>
        <div id="counterDiv">
          <span id="counter">0</span> uczni√≥w <br />jest aktywnych
        </div>
      
      </div>
    </header>
    <div id="wrapper" >
      <canvas id="canvas" width="1900" height="10000">  </canvas>
      
    </div>
    <script src="js/paper-full.min.js"></script>
  </body>

  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="./client.js"></script>
  <script src="jquery-1.11.3.min.js"></script>
  <script>
 
    $(document).ready(function() {
    var NavY = $('.content').offset().top;
      
    var stickyNav = function(){
    var ScrollY = $(window).scrollTop();
           
    if (ScrollY > NavY) { 
        $('.content').addClass('sticky');
    } else {
        $('.content').removeClass('sticky'); 
    }
    };
      
    stickyNav();
      
    $(window).scroll(function() {
        stickyNav();
    });
    });
     
</script>

</html>
